# ページ紹介

## 作成の目的

+ 転職時の自己紹介用
+ Reactの勉強用
+ 自分の作成物の紹介のため

## どんな感じで作ったか

もともと、適当にサイトのテンプレートをとってきて使用するつもりだった。  
頂きました→[NEOS](https://demos.freehtml5.co/neos/)  
ただ、SPAポイ感じにはなっていたが

+ ヘッダーがページごとにコピペだったり
+ 少しくらい自分でカスタマイズしたい
+ React使ってみたい
+ そもそも記事はmarkdownでかきたい

という理由で、色々と改造をはじめた。  
そのせいでポートフォリオの作成が遅れそうだ。

[このサイトのソース](https://github.com/ichir0roie/introduction-app)

## 結局どんな実装をしたか

+ Reactを使用したheaderのコンポーネント化
+ markdownパッケージを使用したマークダウンの導入
  + マークダウンファイルからの自動取り込み。

主に実装した機能は以上の2つになる。マークダウンの導入については  
すこし工夫をした。  
そのままだと文字列としてマークダウンを読み込む必要があり、  
多くの記事をまとめるにはやりづらい部分があったので、  

1. 記事自体はmdファイルで作成できるようにした。
2. そのために以下の記述を自動生成するように変更した。
   + 対応するjsファイルの生成
   + importと配列の自動生成

これによって、独立したマークダウンを作成した後pythonでjsを自動生成すればサイトに反映されるようにした。  
ただ、まだ画像の貼り付けなどには対応していなかったため、やばい。

## 2021/02/09 追記

2021/02/06時点での実装方法では記事の変更にRouterを使用していた。  
更にテキストファイルの読み込ませ方を知らなかったので、
jsファイル内に取り込ませて、ページ読み込み時にjs内に埋め込まれるような  
**とてもひどい実装方法をしていた。**

以上を踏まえてパフォーマンスを改善すべく色々やった結果、以下の実装方法に落ち着いた。

+ mdファイルはjsに埋め込んだりせず、feathを使用してグローバルに保持する。
+ グローバルに保持した後、全体を再レンダーすることで表示を更新する。

+ mdファイルを読み込むタイミングは各ページ用のボタンを押したとき。
+ 当初は非同期処理が必要かと思ったが、fetch関数内でReactDom.render("root")な感じで動いた。

これによって、完全にSPAな感じになり、読み込みも爆速になった。
ページ全体を再描写しているわけではなく、ちゃんと記事のみを更新している。
記事データはボタンを押すまで読み込まないからスタートも軽い。

いい感じになったと個人的に思う。

***それでやったことがマークダウンの読み込み。本末転倒だなと作ってから思った。***  
僕はマークダウンが好きです。

## ISSUES

### TODO

+ [X] ~~*記事を作成しないと*~~ [2021-02-12]
+ [ ] ポートフォリオをつくれ
+ [ ] python実行時に前のmdファイル消さないと

### FIXME

+ [ ] ボタンにしたせいでテーマが崩れた。
+ [ ] 文字のフォントが最悪
+ [X] ~~*タイトルがデフォルトのままだよ。*~~ [2021-02-13]
  + [X] ~~*アイコンも*~~ [2021-02-14]

### HACK

+ [ ] mdファイルをグローバルで保持してすぐにレンダーするというのはナンセンス

### XXX

+ [ ] マークダウンライブラリの機能不足
  + 以下例
    + [X] ~~*テスト*~~ [2021-02-09]
  + [ ] チェックボックスに対応してない
  + [ ] 取り消し線に対応してない
